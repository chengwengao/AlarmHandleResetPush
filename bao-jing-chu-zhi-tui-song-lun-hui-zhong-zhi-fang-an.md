**推送状态流转图 **

![](/assets/推送状态量流转图.svg)

**说明**：初始状态为0，第一次报警所有联系人和相关管理人全发一次短信，此时将推送状态量置为1,5~15分钟有报警，第一、二联系人推送报警通知，推送状态量置为3，大于15分钟有报警，第一、二联系人和所有相关管理员全发一次短信，此时状态量置为4，除了初始状态，在任意后3个状态上触发处置操作，推送状态量全部置为0，回归初始状态。

**报警、处置状态量更新操作**

![](/assets/报警处置逻辑状态图.svg)

**通过状态量判断是否推送的判断逻辑**

![](/assets/所有状态流转判断逻辑流程图.svg)

**说明：**

* 注释1中推送状态量为2走完了为什么就是3？因为根据【推送状态流转图】来看，推送状态量只有0，1，2，3这四种状态，前面三种状态都已走完，排除法只剩下3这个状态。
* 注释2中



